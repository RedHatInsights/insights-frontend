.actions-page
  page-header(title="Actions", icon="fa-file-text")
  new-actions-graph

  .content-wrap(ng-if='loading')
    .row.ng-animate-enabled
      .spinner.spinner-lg

  .content-wrap(ng-if='!loading')
    section.metrics
      .rha-notifications
      .row
        .col-md-6.chart-col.clearfix
          .chart-container.text-center
            .donut-container
              .donut-hole
                .content
                  .num {{stats.rules.total}}
                  .text(translate) Issues
              .rha-telemetry-donut(stats='stats')
          .row
            .col-lg-10.col-lg-offset-1
              table.legend
                tbody
                  tr
                    td(ng-repeat='category in categoryTopics.slice(0,(categoryTopics.length > 3 ? 2 : categoryTopics.length))')
                      a(ng-class='category.id', ui-sref="app.topic({id: category.id, product: getSelectedProduct()})")
                        i.fa.fa-square.inline-right(ng-class="category.id + '-color'", aria-hidden="true")
                        span.desc(translate) {{category.id | titlecase}}
                        span.count &nbsp;({{category.count}})
                  tr(ng-if='categoryTopics.length > 3')
                    td(ng-repeat='category in categoryTopics.slice(2,categoryTopics.length)')
                      a(ng-class='category.id', ui-sref="app.topic({id: category.id, product: getSelectedProduct()})")
                        i.fa.fa-square.inline-right(ng-class="category.id + '-color'", aria-hidden="true")
                        span.desc(translate) {{category.id | titlecase}}
                        span.count &nbsp;({{category.count}})
        .col-md-6
          card.widget.widgetIncidentSummary(id="widgetIncidentSummary", ng-if="isBeta")
            card-header.gray
              h4(translate) Incident summary
            card-content.flexgrid.equalheights
              incident-summary(incident-count='incidentCount', incident-system-count='incidentSystemCount', rule-hits='stats.rules.total')

          card
            card-header.gray
              h4(translate) Risk summary
            card-content
              severity-summary(stats='stats')

    section.gray.full-width
      span.pull-right(ng-show='isContentManager')
        | [
        a(ui-sref='app.admin-topic') edit
        | ]
      h2.section-title.section-title-red(translate) Featured Topics
      .other-topics(ng-if='featuredTopics.length')
        other-topic(ng-repeat = "topic in featuredTopics | orderBy:'topic.order' track by topic.id", topic='topic')
        .text-center.extra-topics(ng-if='!show.extraTopics && extraTopics.length')
          button.btn.btn-sm.btn-default(ng-click='show.extraTopics = true', translate) More topics
        .row(ng-if='!featuredTopics.length')
          .col-xs-12.text-center
            strong No topics currently available.&nbsp;
              a(ui-sref='info.getting-started.direct', translate) Register more systems.
    section.full-width(ng-if='show.extraTopics')
      .flexgrid.equalheights.other-topics
        .row
          other-topic(ng-repeat = "topic in extraTopics | orderBy:'topic.order' track by topic.id", topic='topic')
