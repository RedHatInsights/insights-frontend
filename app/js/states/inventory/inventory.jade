section.inventory
  .page-header
    h1.page-title.pull-left
      i.fa.fa-database &nbsp;
      span(translate) Inventory

  inventory-filters
  .rha-notifications
  .content-wrap
    .table-search
      .row
        .col-xs-6
          search-box(on-search='filter.setSearchTerm(model); filter.doFilter();', throttle='1000', placeholder='Find a system')

    inventory-actions

    .row.row-short(ng-show='getListType() === listTypes.card && !loading')
      .col-sm-12
        system-card.ng-animate-enabled(
          ng-repeat='system in systems track by system.system_id',
          system='system',
          checkboxes='checkboxes',
          checkbox-tooltip="canSelectSystem(system) ? defaultTooltip : getDisabledCheckboxTooltip(system)"
        )

    .row.row-short(ng-show='!loading')
      .col-md-12
        table.table.ng-table(ng-show='getListType() === listTypes.table')
          thead
            tr
              th
                input.selectme(
                  tooltip='Select All',
                  tooltip-trigger='mouseenter',
                  tooltip-append-to-body='true',
                  tooltip-placement='top',
                  type="checkbox",
                  ng-indeterminate="checkboxes.indeterminate",
                  ng-model='checkboxes.checked',
                  ng-change='selectAll(); checkboxes.checkboxChecked(checkboxes.checked, getSelectableSystems())')

              th.sortable.nowrap(ng-class="predicate | sortClass:'system_type_id':reverse", ng-click="sort('system_type_id')")
                .sort-indicator(translate) System Type
              th.sortable.nowrap(ng-class="predicate | sortClass:'toString':reverse", ng-click="sort('toString')")
                .sort-indicator(translate) System Name
              th.sortable.nowrap(ng-class="predicate | sortClass:'last_check_in':!reverse", ng-click="sort('last_check_in')")
                .sort-indicator(translate) Last Check In
              th.sortable.nowrap(ng-class="predicate | sortClass:'report_count':reverse", ng-click="sort('report_count')")
                .sort-indicator(translate) Status
          tbody
            tr(ng-repeat='system in systems track by system.system_id',
               ng-class="{'stale': !system.isCheckingIn}",
               ng-click='checkboxes.rowClick($event, system.system_id)',
               ng-mousedown='checkboxes.rowClick($event, system.system_id)',
               data-id="{{system.system_id}}"
            )
              td
                input.selectme(
                  type='checkbox',
                  ng-model='checkboxes.items[system.system_id]',
                  ng-click='checkboxes.rowClick($event, system.system_id); $event.stopPropagation();')
              td.nowrap
                type-icon(type-id='system.system_type_id', include-text='true')
              td.nowrap.long-name
                a(ng-click="showActions(system)") {{system.toString}}
              td.nowrap {{ system.last_check_in | timeAgo }}
              td.nowrap
                a.action-count(ng-click='showActions(system)')
                  span.text(translate, translate-n="system.report_count", translate-plural="{{$count}} Actions") {{system.report_count}} Action
                  span.pull-right.status-icon(ng-class="{'success': !system.report_count, 'fail': system.report_count}")
                    i.fa(ng-class="{'no-action': !system.report_count, 'yes-action': system.report_count}")

    .row.row-short(ng-show='!loading')
      pagination.pull-right.pagination-blue(
        ng-if="totalSystems() > pager.perPage",
        total-items="totalSystems()",
        ng-model="pager.currentPage",
        items-per-page="pager.perPage",
        ng-change="doScroll()")

  .animate-wrapper.margin-top
    .row.row-short.ng-animate-enabled(ng-show='loading')
      .col-xs-12
        .load.text-center
          .spinner.spinner-lg
          span(translate) Loading system informationâ€¦
