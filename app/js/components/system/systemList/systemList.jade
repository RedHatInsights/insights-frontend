.system-list(ng-if="!loading")
  .table-header
    //- Actions button
    md-menu(md-offset="0 38", ng-if="!noActions")
      md-button.md-raised.md-primary(
          type='button',
          data-toggle='dropdown',
          aria-haspopup='true',
          aria-expanded='false',
          ng-disabled='!checkboxes.totalChecked && !loading',
          ng-click='$mdMenu.open($event)')
        .icon-inline
          strong(translate) Actions
          i.fa.fa-caret-down
      md-menu-content
        md-menu-item(ng-if='config.isPlannerEnabled')
          md-button(ng-click='addToPlan(false)',
            ng-disabled='!isFixableSelected()')
            .icon-inline
              strong(translate) Create a new Plan/Playbook
              ansible-icon.inline-left(
                value='isFixableSelected() && (plans.future.length || plans.unscheduled.length)',
                show-tooltip='false')
        md-menu-item(ng-if='config.isPlannerEnabled')
          md-button(ng-click='addToPlan(true)',
            ng-disabled='!isFixableSelected() || (!plans.future.length && !plans.unscheduled.length)')
            .icon-inline
              strong(translate) Add to existing Plan/Playbook
              ansible-icon.inline-left(
                value='isFixableSelected() && (plans.future.length || plans.unscheduled.length)',
                show-tooltip='false')
        md-menu-item(ng-if="state === 'app.inventory'")
          md-button(ng-click='groupSystems(systemsToAction())')
            strong(translate) Group systems
        md-menu-item(ng-if="state === 'app.inventory'")
          md-button(ng-click='removeFromGroup()')
            span(translate,
              translate-n='systemsToAction().length',
              translate-plural='Remove systems from group') Remove system from group
            strong &nbsp;{{Group.current().display_name}}
        md-menu-item(ng-if="state === 'app.inventory'", tooltip='{{:: unregisterButtonTooltip | translate}}')
          md-button(ng-disabled='!isUnregistrableSelected()',
            ng-click='isUnregistrableSelected() && doUnregisterSelected()',
            translate)
            strong(translate) Unregister

    //- Impacted Systems Header
    .table-header-title(ng-if='!loading')
      h3.system-count(translate, translate-n='totalSystems', translate-plural='{{:: $count}} Systems', ng-if='!ruleDetails') 1 System
      h3.system-count(translate, translate-n='totalSystems', translate-plural='{{:: $count}} Impacted Systems', ng-if='ruleDetails && ruleDetails.type !== "osp"') 1 Impacted System
      h3.system-count(translate, translate-n='totalSystems', translate-plural='{{:: $count}} Impacted Deployments', ng-if='ruleDetails && ruleDetails.type === "osp"') 1 Impacted Deployment
      small.light(ng-if='checkboxes.totalChecked', translate) &nbsp; ({{totalSystemsSelected}} Selected
        span(ng-if='allSelected && pager.perPage < totalSystems') .
          a(ng-if='!reallyAllSelected', ng-click='reallySelectAll()', translate) &nbsp;Select All Systems.
          a(ng-if='reallyAllSelected', ng-click='deselectAll()', translate) &nbsp;Deselect All Systems.
        span )
      br
      a.icon-inline(
      ng-click="registerSystem()",
      ng-if="isPortal && !noRegisterMore")
        i.fa.fa-plus
        strong(translate) Register More

    //- List type button
    list-type(ng-if="!noListTypes")

  .card-table-header(ng-if='getListType() === listTypes.card')
    md-checkbox.md-accent.md-hue-1.md-checkbox-list.checkbox(
      tooltip="{{:: 'Select All' | translate}}",
      aria-label='Select All Systems Checkbox',
      tooltip-trigger='mouseenter',
      tooltip-append-to-body='true',
      tooltip-placement='top',
      type="checkbox",
      md-indeterminate="{{ checkboxes.indeterminate || false }}",
      ng-model='checkboxes.checked',
      ng-change='selectAll(); checkboxes.checkboxChecked(checkboxes.checked, systems)')
    label.type(translate, ng-class="sorter.getSortClass('system_type_id')", ng-click="sorter.sort('system_type_id')") &nbsp; Type
    strong.hostname(translate, ng-class="sorter.getSortClass('toString')", ng-click="sorter.sort('toString')") Name &nbsp;
    strong.action-count(translate, ng-class="sorter.getSortClass('report_count')", ng-click="sorter.sort('report_count')") Action Count

  .system-cards.card-list(ng-if='getListType() === listTypes.card && !loading')
    system-card.ng-animate-enabled(
      ng-repeat='system in systems track by system.system_id',
      system='system',
      checkboxes='checkboxes')

  table(ng-if='getListType() === listTypes.table || noListTypes')
    thead
      tr
        th.min
          md-checkbox.md-accent.md-hue-1.md-checkbox-list(
            tooltip="{{:: 'Select All' | translate}}",
            type="checkbox",
            aria-label='Select All Systems Checkbox',
            md-indeterminate="{{ checkboxes.indeterminate || false }}",
            ng-model='checkboxes.checked',
            ng-change='selectAll(); checkboxes.checkboxChecked(checkboxes.checked, systems)')
        th.fit-content.min.sortable(ng-class="sorter.getSortClass('system_type_id')", ng-click="sorter.sort('system_type_id')", translate) System Type
        th.sortable(ng-class="sorter.getSortClass('toString')", ng-click="sorter.sort('toString')", translate) System Name
        th.fit-content.min.sortable(ng-class="sorter.getSortClass('last_check_in')", ng-click="sorter.sort('last_check_in')", translate) Last Check In
        th.min.sortable(ng-class="sorter.getSortClass('report_count')", ng-click="sorter.sort('report_count')", translate) Status
    tbody(ng-if='!loading')
      tr(ng-repeat='system in ::systems track by system.system_id',
         ng-class="{'stale': !system.isCheckingIn}",
         ng-click='checkboxes.rowClick($event, system.system_id)',
         ng-mousedown='checkboxes.rowClick($event, system.system_id)',
         data-id="{{:: system.system_id}}")
        td.min
          md-checkbox.md-accent.md-hue-1.md-checkbox-list(
            type='checkbox',
            aria-label='Select System Checkbox',
            ng-model='checkboxes.items[system.system_id]',
            ng-click='checkboxes.rowClick($event, system.system_id); $event.stopPropagation();')
        td.fit-content
          type-icon(type-id='system.system_type_id', include-text='true')
        td.fit-content
          a(ng-click="showSystemModal(system)") {{:: system.toString}}
        td.fit-content {{:: system.last_check_in | timeAgo }}
        td.fit-content
          a.action-count.icon-inline(ng-click='showSystemModal(system)')
            span.text(translate, translate-n="system.report_count", translate-plural="{{:: $count}} Actions") {{:: system.report_count}} Action
            i.fa(ng-class="{'no-action': !system.report_count, 'yes-action': system.report_count, 'success': !system.report_count, 'fail': system.report_count}")
            span.sr-only Time to destination by car:

  pagination.pull-right.pagination-blue(
    ng-if="totalSystems > pager.perPage",
    total-items="totalSystems",
    ng-model="pager.currentPage",
    items-per-page="pager.perPage",
    ng-change="doScroll()")